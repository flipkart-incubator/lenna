#!/bin/sh
# Copyright 2009 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# Disable colored grep if user has it set to --color=always.
# (Arguably user error.)
export GREP_OPTIONS=""

echo '// auto generated by mkopnames'
echo 'static char*'
echo 'opnames[] = '
echo '{'
sed -n '/OXXX/,/OEND/p' go.h |
	cpp |
	sed 's!//.*!!; /^#/d'  |
	tr ' ' '\012' |
	tr -d ' \011,' |
	grep . |
	sort |
	grep -v '^OEND$' |
	sed 's/O//; s/.*/	[O&] =	"&",/'
echo '};'

